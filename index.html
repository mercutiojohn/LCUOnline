<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>LCU在线</title>
    <!-- eleme -->
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
    <!-- vue -->
    <!-- <script src="https://cdn.jsdelivr.net/npm/vue@2.6.10/dist/vue.js"></script> -->
    <script src="js/vue.js"></script>
    <!-- eleme -->
    <script src="https://unpkg.com/element-ui/lib/index.js"></script>
    <link rel="stylesheet" href="css/style.css">

</head>

<body>
    <div id="view">
        <div id="container">
            <ul class="tabs">
                <!-- <li v-for="(item,index) in tabs" @click="changeTab(item)" :class="'tab '+item.status">{{item.title}}
                </li> -->
                <li v-for="(item,index) in tabs" @click="changeTab(index)"
                    :class="'tab' + (item.status?' activeTab':' inactiveTab')">
                    {{item.title}}
                    <a :href="item.url" style="color: #ffffffbb; text-decoration:none">GO</a>
                </li>
            </ul>
        </div>
        <div id="app">
            <!-- <iframe :src="currentItem.url" frameborder="0" scrolling="auto"></iframe> -->
            <iframe :style="contentStyleObj" v-for="item in tabs" :src="item.url" frameborder="0" scrolling="auto"
                v-show="item.status"></iframe>
            <!-- <div :style="contentStyleObj" id="function_box" v-show="functionBox.status">
                <ul class="blocks">
                    <li v-for="(item,index) in blocks">
                        <a :href="item.url" class="block"><span>{{item.title}}</span></a>
                    </li>
                </ul>
                <textarea class="notes" v-model="notes" placeholder="你可以在这里记录各科目的网课要求。"></textarea>
                button @click="setCookie('notes', notes, 365)">保存</button>
            </div> -->
        </div>
    </div>
</body>
<script>
    // var iframe = document.getElementsByTagName("iframe");
    // iframe[1].onload = function () {
    //     alert("iframe load  done");
    // };
    var app = new Vue({
        el: '#view',
        data: {
            currentItem: {},
            visible: false,
            tabs: [
                // {
                //     title: "日历",
                //     status: false,
                //     url: "https://outlook.live.com/calendar/0/"
                // },
                {
                    title: "超星学习通",
                    status: false,
                    url: "http://i.chaoxing.com/base"
                },
                {
                    title: "U+新工科智慧云",
                    status: false,
                    url: "http://ee-c.lcu.edu.cn/si/student/group"
                },
                // {
                //     title: "课表",
                //     status: false,
                //     url: "http://jwcweb.lcu.edu.cn/jwglxt/"
                // },
                {
                    title: "大学英语挂机网",
                    status: false,
                    url: "http://210.44.112.108"
                },
                {
                    title: "传智播客",
                    status: false,
                    url: "http://stu.ityxb.com/Classroom/course/learning"
                },
                {
                    title: "传智播客刷视频",
                    status: false,
                    url: "http://stu.ityxb.com/learning/3b97338b3d7546e6936aabd43f7d16a9/preview/list"
                },
                {
                    title: "斗鱼关注",
                    status: false,
                    url: "https://www.douyu.com/directory/myFollow"
                },
                {
                    title: "We Learn",
                    status: false,
                    url: "https://welearn.sflep.com/2019/student/index.aspx"
                },
                {
                    title: "有道精品课",
                    url: "https://ke.youdao.com/user/mycourse/",
                    status: false
                },
                {
                    title: "千锋",
                    status: false,
                    url: "http://nz.1000phone.com/studentIndex"
                },
                {
                    title: "哔哩哔哩",
                    status: false,
                    url: "https://space.bilibili.com/4325844/favlist"
                },
                // {
                //     title: "",
                //     status: false,
                //     url: ""
                // },
                // {
                //     title: "计划",
                //     status: false,
                //     url: "https://www.notion.so/mercutio/8029f70aeeaf44fc9312f788507414fd"
                // }

            ],
            functionBox: {
                status: false
            },
            contentStyleObj: {
                height: '',
                width: '100%'
            },
            notes: "",
            blocks: [{
                    title: "教务系统",
                    url: "http://ee-c.lcu.edu.cn/si/student/group"
                },
                {
                    title: "超星学习通",
                    url: "http://i.chaoxing.com/base"
                },
                // {
                // title: "课表",
                // status: false,
                // url: "http://jwcweb.lcu.edu.cn/jwglxt/"
                // },
                {
                    title: "大学英语挂机网",
                    url: "http://210.44.112.108"
                },
                {
                    title: "传智播客",
                    url: "http://stu.ityxb.com/Classroom/course/learning"
                },
                {
                    title: "斗鱼关注",
                    url: "https://www.douyu.com/directory/myFollow"
                },
                {
                    title: "更多"
                }
            ]
        },
        methods: {
            changeTab(selectedTab) {
                // this.currentItem = selectedTab;
                for (var i = 0; i < this.tabs.length; i++) {
                    this.tabs[i].status = false;
                }
                // if (selectedTab == this.tabs.length - 1)
                // this.functionBox.status = true;
                // else
                this.tabs[selectedTab].status = true;
            },
            getHeight() {
                var h = window.innerHeight || document.documentElement.clientHeight || document.body
                    .clientHeight;
                this.contentStyleObj.height = h - document.getElementById("container").offsetHeight - 15 +
                    'px';
            },

            // Cookies
            setCookie(cname, cvalue, exdays) {
                var d = new Date();
                d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));
                var expires = "expires=" + d.toUTCString();
                console.info(cname + "=" + cvalue + "; " + expires);
                document.cookie = cname + "=" + cvalue + "; " + expires;
                console.info(document.cookie);
            },
            getCookie(cname) {
                var name = cname + "=";
                var ca = document.cookie.split(';');
                console.log("获取cookie,现在循环")
                for (var i = 0; i < ca.length; i++) {
                    var c = ca[i];
                    console.log(c)
                    while (c.charAt(0) == ' ') c = c.substring(1);
                    if (c.indexOf(name) != -1) {
                        return c.substring(name.length, c.length);
                    }
                }
                return "";
            },
            clearCookie() {
                // this.setCookie("username", "", -1);
            },
            checkCookie() {
                this.notes = this.getCookie("notes");
                // var user = this.getCookie("username");
                // if (user != "") {
                //     console.info("Welcome again " + user);
                // } else {
                //     user = prompt("Please enter your name:", "");
                //     if (user != "" && user != null) {
                //         this.setCookie("username", user, 365);
                //     }
                // }

            }
        },
        beforeCreate() {

        },
        created() {
            this.checkCookie();

            // this.currentItem = this.tabs[0];
            // this.tabs[this.tabs.length - 1].status = true;
            this.tabs[0].status = true;
            window.addEventListener('resize', this.getHeight);
            this.getHeight();

            /*console.log(document.getElementsByTagName("iframe")[0].offsetHeight);
            var i = document.getElementsByTagName("iframe").length;
            // while (i--) document.getElementsByTagName("iframe")[i].height = this.frameHeight;
            while (--i) document.getElementsByTagName("iframe")[i].offsetHeight = this.frameHeight;
            console.log(document.getElementsByTagName("iframe")[0].offsetHeight);*/

        },
        destroyed() {
            window.removeEventListener('resize', this.getHeight);
        },
        computed: {
            // frameHeight: function () {
            //     var h = window.innerHeight || document.documentElement.clientHeight || document.body
            //         .clientHeight;
            //     var tabHeight = 10 || document.getElementsById("container").offsetHeight;
            //     return h - tabHeight;
            // }
        },
        watch: {
            notes: function () {
                this.setCookie("notes", this.notes, 365);
            }
        }
    })
</script>
<!-- <script charset="gbk" src="https://www.baidu.com/js/opensug.js"></script>
<script type="text/javascript">
    BaiduSuggestion.bind('search_submit', { // Input ID
        "XOffset": "0", // Proposal frame position X offset, unit px.
        "YOffset": "0", // Prompt box position vertical Y offset, unit px.
        "fontColor": "#ff0000", // Prompt text color.
        "fontColorHI": "#0000ff", // Prompt box highlight text color when selected.
        "fontSize": "14px", // font size
        "fontFamily": "Microsoft YaHei", // Text fontFamily.
        "borderColor": "#008000", // Prompt box border color.
        "bgcolorHI": "#f0f0f0", // Prompt box highlights the selected color.
        "sugSubmit": true // Whether to submit the form when the entry in the prompt box is selected.
    }, function (Callback) {
        console.log('You have chosen：' + Callback);
    });
</script> -->

</html>